# プロジェクト名: Square Crop

## 概要
画像を正方形にトリミングし、元画像とセットでZIPダウンロードできるシンプルなWebツール。サムネイル作成に特化。

## 解決する課題
- サムネイル用に「チラ見せ」画像を作りたいが、毎回トリミング作業が面倒
- 元画像とトリミング画像をセットで管理したい
- 複数画像を効率よく処理したい

## ターゲットユーザー
- サムネイル画像を頻繁に作成するクリエイター
- SNS投稿用の画像を加工したい人

---

## 技術スタック

- フロントエンド: HTML / CSS / JavaScript（単一または最小構成）
- ホスティング: GitHub + Netlify
- データベース: 不要
- 外部ライブラリ: JSZip（ZIP生成用）

---

## プライバシー・セキュリティ

- **全処理はブラウザ内（ローカルPC）で完結**
- 画像データはサーバーに一切送信されない
- オフライン環境でも動作可能（初回読み込み後）

---

## 機能一覧

### 必須機能
- [ ] 画像の複数読み込み（ドラッグ＆ドロップ対応）
- [ ] 正方形トリミング枠の表示・配置
- [ ] トリミング枠のサイズ変更（正方形固定）
- [ ] トリミング枠のドラッグ移動
- [ ] キーボード操作（→で次の画像、←で前の画像）
- [ ] 出力サイズ選択（プリセット＋カスタム入力）
- [ ] 一括ZIPダウンロード
- [ ] ファイル命名規則: 1-1（トリミング画像）、1-2（元画像）
- [ ] ダーク/ライトモード切替（右上トグル）
- [ ] 処理中インジケーター表示

### 出力サイズ設定
- プリセット: 512 / 1080 / 2048 / 3000（px）
- カスタム入力: 任意の数値を入力可能
- ※出力サイズが元画像より大きい場合は拡大処理

---

## 操作フロー

```
1. 画像をドラッグ＆ドロップ（複数可）
2. 1枚目が表示される
3. マウスで正方形枠を配置・サイズ調整
4. → キーで次の画像へ（← で戻る）
5. 出力サイズを選択
6. 「Download ZIP」ボタンをクリック
7. 元画像とトリミング画像がセットでZIP保存
```

---

## デザイン仕様

### 配色
- ライトモード: 背景 #FFFFFF / 文字 #000000
- ダークモード: 背景 #0A0A0A / 文字 #FFFFFF
- ボーダー・枠線: ライト時 #000000 / ダーク時 #FFFFFF

### フォント
- 英字: Inter
- 日本語: Noto Sans JP
- ウェイト: 400（通常）/ 600（強調）

### レイアウト
```
┌─────────────────────────────────────────────────────┐
│ [Square Crop]                        [🌙/☀️ トグル] │  ← ヘッダー
├─────────────────────────────────────────────────────┤
│                                                     │
│    ┌─────────────────────────────────┐             │
│    │                                 │             │
│    │         画像表示エリア          │             │
│    │      （正方形枠をドラッグ）      │             │
│    │                                 │             │
│    └─────────────────────────────────┘             │
│                                                     │
│           ◀ 1 / 10 ▶                               │  ← 画像ナビ
│                                                     │
├─────────────────────────────────────────────────────┤
│  出力サイズ: [▼ プリセット] または [    ] px       │
│                                                     │
│              [ Download ZIP ]                       │  ← メインアクション
└─────────────────────────────────────────────────────┘
```

### UI要素
- ドロップエリア: 破線ボーダー、ホバー時に色反転
- トリミング枠: 白い枠線（2px）、四隅にリサイズハンドル
- ボタン: 角丸なし、ボーダーのみ、ホバー時に色反転
- トグル: シンプルなアイコン切替（月/太陽）

---

## ファイル構成

```
square-crop/
├── index.html      # メインHTML
├── style.css       # スタイル
├── script.js       # メインロジック
├── CLAUDE.md       # この設計書
└── README.md       # GitHub用説明
```

---

## 開発の進め方

### Phase 1: MVP（最小動作版）
1. 単一画像の読み込み・表示
2. 正方形トリミング枠の表示・ドラッグ移動
3. トリミング実行・単一画像ダウンロード

### Phase 2: 複数画像対応
4. 複数画像の読み込み
5. ←→ キーでの画像切替
6. 各画像のトリミング位置を保持

### Phase 3: ZIP出力
7. JSZipの導入
8. 一括ZIP生成・ダウンロード
9. ファイル命名規則の実装（1-1, 1-2形式）

### Phase 4: 仕上げ
10. 出力サイズ選択UI
11. ダーク/ライトモード
12. 処理中インジケーター
13. デザイン調整

---

## 技術的なポイント

### 画像処理
- Canvas API を使用
- トリミング: `drawImage()` で切り出し
- リサイズ: Canvas のサイズを出力サイズに設定

### ZIP生成
- JSZip ライブラリを使用
- CDN: `https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js`

### トリミング枠の操作
- マウスイベント（mousedown, mousemove, mouseup）
- 枠のドラッグ移動
- 四隅のハンドルでサイズ変更（アスペクト比1:1固定）

### キーボード操作
- `ArrowRight`: 次の画像
- `ArrowLeft`: 前の画像

---

## 備考・注意点

- 大きな画像（5000px以上）を多数処理する場合、ZIP生成に数十秒かかる可能性あり
- 処理中は「処理中...」インジケーターを表示してユーザーに待機を伝える
- 出力サイズが元のトリミング範囲より大きい場合、拡大による画質劣化の可能性あり（許容範囲内）
